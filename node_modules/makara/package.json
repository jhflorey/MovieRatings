{
  "_args": [
    [
      {
        "raw": "makara@^2.0.3",
        "scope": null,
        "escapedName": "makara",
        "name": "makara",
        "rawSpec": "^2.0.3",
        "spec": ">=2.0.3 <3.0.0",
        "type": "range"
      },
      "/Users/jhflorey/Documents/MovieRatings"
    ]
  ],
  "_from": "makara@>=2.0.3 <3.0.0",
  "_id": "makara@2.0.3",
  "_inCache": true,
  "_location": "/makara",
  "_nodeVersion": "0.12.7",
  "_npmUser": {
    "name": "aredridel",
    "email": "aredridel@dinhe.net"
  },
  "_npmVersion": "2.13.3",
  "_phantomChildren": {
    "es5-ext": "0.10.15"
  },
  "_requested": {
    "raw": "makara@^2.0.3",
    "scope": null,
    "escapedName": "makara",
    "name": "makara",
    "rawSpec": "^2.0.3",
    "spec": ">=2.0.3 <3.0.0",
    "type": "range"
  },
  "_requiredBy": [
    "/"
  ],
  "_resolved": "https://registry.npmjs.org/makara/-/makara-2.0.3.tgz",
  "_shasum": "735caa2ab862eaa4db7efedd14b7f6eb1b2226df",
  "_shrinkwrap": null,
  "_spec": "makara@^2.0.3",
  "_where": "/Users/jhflorey/Documents/MovieRatings",
  "author": {
    "name": "Erik Toth",
    "email": "ertoth@paypal.com"
  },
  "bugs": {
    "url": "https://github.com/krakenjs/makara/issues"
  },
  "contributors": [
    {
      "name": "Richard Ragan",
      "email": "rragan@paypal.com"
    },
    {
      "name": "Stephen Westhafer",
      "email": "swesthafer@paypal.com"
    },
    {
      "name": "Lenny Markus",
      "email": "lmarkus@paypal.com"
    },
    {
      "name": "Jeff Harrell",
      "email": "jeharrell@paypal.com"
    },
    {
      "name": "Jean-Charles Sisk",
      "email": "jsisk@paypal.com"
    },
    {
      "name": "Sanjeev Koranga",
      "email": "skoranga@paypal.com"
    },
    {
      "name": "Dereck Quock",
      "email": "dquock@paypal.com"
    },
    {
      "name": "Aria Stewart",
      "email": "ariastewart@paypal.com"
    }
  ],
  "dependencies": {
    "adaro": "^1.0.0",
    "aproba": "^1.0.1",
    "bundalo": "^0.2.9",
    "engine-munger": "^1.0.0",
    "es6-weak-map": "^1.0.2"
  },
  "description": "Kraken support for i18n and specialization in dust.js templates",
  "devDependencies": {
    "express": "^4.12.4",
    "nyc": "^2.2.1",
    "supertest": "^1.0.1",
    "tap": "^1.2.0"
  },
  "directories": {},
  "dist": {
    "shasum": "735caa2ab862eaa4db7efedd14b7f6eb1b2226df",
    "tarball": "https://registry.npmjs.org/makara/-/makara-2.0.3.tgz"
  },
  "gitHead": "05735bec04dc6dfc3e505d9c8b55d4566f148cfe",
  "homepage": "http://krakenjs.com/makara",
  "keywords": [
    "dust.js",
    "i18n",
    "internationalization",
    "l10n",
    "localization",
    "specialization",
    "templates"
  ],
  "license": "Apache-2.0",
  "main": "index.js",
  "maintainers": [
    {
      "name": "totherik",
      "email": "totherik@gmail.com"
    },
    {
      "name": "jeffharrell",
      "email": "jeff@juxtadesign.com"
    },
    {
      "name": "aredridel",
      "email": "aredridel@nbtsc.org"
    },
    {
      "name": "pvenkatakrishnan",
      "email": "poo.leo@gmail.com"
    }
  ],
  "name": "makara",
  "optionalDependencies": {},
  "readme": "Makara\n======\n\nA module to set up internationalization in Kraken and Express.js apps.\n\n`makara` is the more opinionated configuration of its component parts, suitable for dropping into an express application and working with relatively little configuration.\n\nIt consists of [bundalo] for loading localized strings for use by application logic, [engine-munger] for controlling the lookup of templates and associated localized strings, and includes [adaro] as a template engine, connecting [dustjs-linkedin] to Express.\n\nThere's nothing inherently dust-centric about makara, but it does provide dust template engines as a default.\n\nLead Maintainer: [Aria Stewart]\n\n[![Build Status]][travis]\n\n\nUsing Makara\n------------\n\nHere's a tiny but complete application\n\n```javascript\nvar express = require('express');\nvar makara = require('makara');\nvar path = require('path');\n\nvar app = express();\n\nvar helpers = [ 'dust-makara-helpers' ];\napp.engine('dust', makara.dust({ cache: false, helpers: helpers }));\napp.engine('js', makara.js({ cache: true, helpers: helpers }));\n\napp.set('views', path.resolve(__dirname, 'public/templates'));\napp.configure('development', function () {\n    app.set('view engine', 'dust');\n});\napp.configure('production', function () {\n    app.set('view engine', 'js');\n});\n\napp.use(makara({\n    i18n: {\n        contentPath: path.resolve(__dirname, 'locales'),\n        fallback: 'en-US'\n    },\n    specialization: {\n        'oldtemplate': [\n            {\n                is: 'newtemplate',\n                when: {\n                    'testmode': 'beta'\n                }\n            }\n        ]\n    }\n}));\n\napp.get('/path', function (req, res) {\n    res.render('localizedtemplate');\n\n    // Or\n\n    makara.getBundler(req).get('contentbundle', function (err, data) {\n        // Do something with err and data here\n    });\n});\n```\n\nConfiguration\n-------------\n\nThe middleware that sets up the Express view engine replacement [engine-munger] takes most of the configuration in `makara`. \n* `i18n.contentPath` - `String`, the root to search for content in. Required.\n* `i18n.formatPath` - `Function`, a function to convert a locale to a path fragment. Optional, defaults to one that returns `country/language`.\n* `i18n.fallback` - `String` or `Object` as [`bcp47`] creates, the locale to use when content isn't found for the locale requested. Required.\n* `enableMetadata` - `Boolean`, defaults to `false`. Sets up metadata editing tags for integration with in-place content editing systems.\n* `specialization` - `Object`, the specialization rule map, in the form expected by [karka].\n* `cache` - `Boolean`, defaults to `false`. Whether the dust engine should cache its views.\n\nContent\n-------\n\nContent intended for localization is stored in `.properties` files as simple `key=value` pairs.\n\nThese are the files that hold the content strings for the different languages your application supports.\n\nNormally, you are likely to start with a master set of content (likely in English) and the localization process will populate corresponding files for the other languages you will need.\n\n### Placement of `.properties` files\n\nThe root of the `.properties` content files is the locales folder at the top level of your project. Under it will be a folder per country (as in `US/`, `DE/`, et cetera).  Below each country folder is one or more language folders (as in `en/`, `de/`).  So `locales/US/en/` will be the likely location for your master set of `.properties` files.\n\n`.properties` files are correlated with the dust templates that use them, by path and name.\n\nIf you have a top level `index.dust` file, its content `.properties` file will be at `locales/US/en/index.properties` This holds all the external content strings used by that template. If your template is at `widgets/display.dust` then the content for US English will be at `locales/US/en/widgets/display.properties`.  If you have content you want to share across pages, then you should factor out use of that content into a separate partial and use that partial to achieve\ncontent sharing.\n\nYou can override this filename mapping by providing a `formatPath` function to the makara i18n configuration.\n\n### What's in a `.properties` file\n\nThe parser for this file format is [spud].\n\nThe format is simple: `key=value` with one message per line encoded as UTF-8.  Comments are prefixed with `#`.\n\nLet's look at some samples and then use them to discuss various points.\n\n`index.properties` file:\n\n````\nindex.title=PayPal Merchant\nindex.callToAction=Enroll now!\nindex.greeting=Welcome {userName}\n\n# A list\nindex.ccList[0]=Visa\nindex.ccList[1]=Mastercard\nindex.ccList[2]=Discover\n\n# A map\nindex.states[AL]=Alabama\nindex.states[AK]=Alaska\nindex.states[AZ]=Arizona\nindex.states[CA]=California\n```\n\nWe are using the name of the file to start our key on each line. This is strictly a convention that makes the path to the file clear. There's duplication between the two, but it makes debugging easier.\n\nText to the right of the `=` sign is a simple message string with the text of the message.\n\nIf you have runtime values to be inserted, use dust brace to select the value from the dust template context as in the `index.greeting` line. Note that there is no restriction on inserting HTML tags into the messages. They are just another string of characters as far as the content processing is concerned.\n\nIn addition to simple strings, we support lists and maps. The `index.ccList` above might be used to provide a list of values to go in a list of allowed credit cards.\n\nThe `index.states` might be used to populate a dropdown list of states with the key as the option tag value and the full state name as the visible text.\n\nTo support writing the key part in natural languages other than English, all UTF-8 characters are allowed with a few exceptions needed to make the key=value syntax work. The exceptions are:\n\n* No equal sign in key part (e.g. first equal sign starts the value)\n* No periods in key part (used to allow keys like a.b.c)\n* No square brackets (used for subscript and map key notation)\n* May not start with # (Used for comments)\n\nThese same general restrictions apply to map key values.  If you need to use characters that are restricted, you can do so using either of these escaping mechanisms:\n\n* `\\udddd` - Like JavaScript but only handles the same characters supported by\n  this notation in JavaScript\n* `\\u{dddddd}` - Like JavaScript ES6 notation and handles all possible Unicode\n  characters\n\nFor example,\n\n```\n\\u2603=snowman\n```\n\nwould use the Unicode snowman character for the key name.\n\n### Key Promotion\n\nThere are some edge cases worth mentioning:\n\nCase 1:\n\n```\nkey.subkey=value\nkey.subkey[property]=value2\n```\n\nIn this case, `key.subkey` is created originally as a string value but is then\noverridden as a map. The original value will be discarded.\n\nCase 2:\n```\nkey.subkey[0]=1\nkey.subkey[property]=value\n```\n\nIn this case, `key.subkey` is created originally as a list but is then converted\nto a map when the alphanumeric key is added.\n\n### Referencing internationalized content from a dust template\n\nThis is done using the `{@message}` helper tag. A sample usage of `@message` is:\n\n```\n{@message type=\"content\" key=\"index.title\"/}\n```\n\nLists and maps are bit trickier when it comes to inlining.\n\nThere are two approaches available. The first uses three additional attributes on the `@message tag`, `before=\"xxx\"` and `after=\"yyy\"` and `sep=\"z\"`.  When emitting the list elements, each will be prefixed by the \"before\" string, if there is one, suffixed by the \"after\" string, if there is one, and separated by the \"sep\" string, if there is one. With sep, the last element is not followed by the separator. Note that the value `{$idx}` can be used in the before/after attribute strings and it will be replaced by the current iteration count when inlining the lists. Similarly, `{$key}` will be replaced with the current key when inlining a map. No replacement is done in the sep string.\n\nIn some cases inlining won't do, even with before/after/sep. For example, if you need to pass the list as a parameter to a templating partial that might implement a dropdown functionality.\n\nFor this, `@message` with a `mode=\"paired\"` attribute offers more flexibility.\n\nThe `mode=\"paired\"` parameter produces the content list such that you can use both the index of the element for the value in an option tag and the value for the displayable text.\n\nThe `mode=\"paired\"` attribute delivers the content in the form of a JSON object, which in the case of a list of months might look like:\n\n```javascript\n[{$id:0,$elt:\"Jan\"}, {$id:1,$elt:\"Feb\"},.. ]\n```\n\nThis gives you more ability to work with both the list/map value and the element value in your template.\n\nIn addition to `mode=\"paired\"` there is an alternate form, `mode=\"json\"` This generates the content list or map as a standard JavaScript array or an object with properties, respectively.\n\nFor more on using the `@provide` helper, see the [advanced helper] docs\n\nContributing\n------------\n\nPlease see the [contribution guide]\n\n[engine-munger]: https://github.com/krakenjs/engine-munger\n[Aria Stewart]: https://github.com/aredridel\n[travis]: https://travis-ci.org/krakenjs/makara\n[Build Status]: https://travis-ci.org/krakenjs/makara.svg?branch=master\n[`bcp47`]: http://npmjs.org/package/bcp47\n[contribution guide]: CONTRIBUTING.md\n[@provide]: https://github.com/rragan/dust-motes/tree/master/src/helpers/data/provide\n[advanced helper]: ADVANCED.md\n[adaro]: https://github.com/krakenjs/adaro\n[engine-munger]: https://github.com/krakenjs/engine-munger\n[bundalo]: https://github.com/krakenjs/bundalo\n[dustjs-linkedin]: http://dustjs.com/\n[spud]: https://github.com/krakenjs/spud\n[karka]: https://github.com/krakenjs/karka\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/krakenjs/makara.git"
  },
  "scripts": {
    "coverage": "nyc report --reporter=lcov",
    "test": "nyc tap test/*.js && nyc report"
  },
  "version": "2.0.3"
}
